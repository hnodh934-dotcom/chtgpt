# ูุตูููุฉ ุงูุตูุงุญูุงุช | Permissions Matrix

> ุฏููู ุดุงูู ูุตูุงุญูุงุช ูู ุฏูุฑ ุนูู ูู ููุฑุฏ ูู ุงูููุตุฉ

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุงูููุตุฉ ุชุณุชุฎุฏู ูุธุงู **RBAC (Role-Based Access Control)** ูุน 9 ุฃุฏูุงุฑ ู 4 ุฃููุงุน ุตูุงุญูุงุช:

**ุฃููุงุน ุงูุตูุงุญูุงุช:**
- `read` - ุงููุฑุงุกุฉ ูุงูุนุฑุถ
- `create` - ุงูุฅูุดุงุก
- `update` - ุงูุชุนุฏูู
- `delete` - ุงูุญุฐู

---

## ๐ฅ ุงูุฃุฏูุงุฑ (Roles)

### 1. ูุฏูุฑ ุงููุธุงู (System Admin)
- **Level:** 10
- **ุงููุตู:** ุตูุงุญูุงุช ูุงููุฉ ุนูู ุฌููุน ุงูููุงุฑุฏ
- **ุงูุงุณุชุฎุฏุงู:** ุงููุงูู ุฃู ุงููุฏูุฑ ุงูุชูููุฐู

### 2. ูุฏูุฑ ุงููุคุณุณุฉ (Organization Manager)
- **Level:** 8
- **ุงููุตู:** ุฅุฏุงุฑุฉ ุงููุคุณุณุฉ ูุงููุณุชุฎุฏููู ูุงููุดุงุฑูุน
- **ุงูุงุณุชุฎุฏุงู:** ูุฏูุฑ ุงูุนูููุงุช

### 3. ูุญุงูู ุฑุฆูุณู (Senior Lawyer)
- **Level:** 7
- **ุงููุตู:** ุฅุฏุงุฑุฉ ุงูุงุณุชุดุงุฑุงุช ุงููุงููููุฉ ูุงููุซุงุฆู
- **ุงูุงุณุชุฎุฏุงู:** ุฑุฆูุณ ุงููุณู ุงููุงูููู

### 4. ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู (Senior Technical Consultant)
- **Level:** 7
- **ุงููุตู:** ุฅุฏุงุฑุฉ ุงูุงุณุชุดุงุฑุงุช ุงูุชูููุฉ ูุงูุชููููุงุช
- **ุงูุงุณุชุฎุฏุงู:** ุฑุฆูุณ ุงููุณู ุงูุชููู

### 5. ูุฏูุฑ ูุดุฑูุน (Project Manager)
- **Level:** 6
- **ุงููุตู:** ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน ูุงูููุงู ูุงููุฑูู
- **ุงูุงุณุชุฎุฏุงู:** ูุฏูุฑ ุงููุดุงุฑูุน

### 6. ูุญุงูู (Lawyer)
- **Level:** 5
- **ุงููุตู:** ุชูุฏูู ุงุณุชุดุงุฑุงุช ูุงููููุฉ
- **ุงูุงุณุชุฎุฏุงู:** ูุญุงูู ูู ุงููุฑูู

### 7. ุงุณุชุดุงุฑู ุชููู (Technical Consultant)
- **Level:** 5
- **ุงููุตู:** ุชูุฏูู ุงุณุชุดุงุฑุงุช ุชูููุฉ
- **ุงูุงุณุชุฎุฏุงู:** ูุณุชุดุงุฑ ุชููู ูู ุงููุฑูู

### 8. ุฏุนู ููู (Support)
- **Level:** 4
- **ุงููุตู:** ุฏุนู ุงูุนููุงุก ูุงูุฑุฏ ุนูู ุงูุชุฐุงูุฑ
- **ุงูุงุณุชุฎุฏุงู:** ููุธู ุงูุฏุนู ุงูููู

### 9. ุนููู (Client)
- **Level:** 2
- **ุงููุตู:** ุงููุตูู ุงูุฃุณุงุณู ููููุตุฉ
- **ุงูุงุณุชุฎุฏุงู:** ุงูุนููู ุงูููุงุฆู

---

## ๐๏ธ ุงูููุงุฑุฏ ูุงูุตูุงุญูุงุช

### 1. ุงููุณุชุฎุฏููู (Users)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ (ุฐุงุชู) | โ | โ (ุฐุงุชู) | โ |
| ุงุณุชุดุงุฑู ุชููู | โ (ุฐุงุชู) | โ | โ (ุฐุงุชู) | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ (ุฐุงุชู) | โ | โ (ุฐุงุชู) | โ |

### 2. ุงููุคุณุณุงุช (Organizations)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู | โ | โ | โ | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ | โ | โ | โ |

### 3. ุงูุฃุฏูุงุฑ (Roles)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ | โ | โ | โ |

### 4. ุงูุตูุงุญูุงุช (Permissions)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ | โ | โ | โ |

### 5. ุงููุดุงุฑูุน (Projects)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุงุณุชุดุงุฑู ุชููู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ (ูุดุงุฑูุนู) | โ | โ | โ |

### 6. ุงูููุงู (Tasks)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุงุณุชุดุงุฑู ุชููู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ (ูุดุงุฑูุนู) | โ | โ | โ |

### 7. ุงููุซุงุฆู (Documents)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู | โ | โ | โ | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ (ูุดุงุฑูุนู) | โ | โ | โ |

### 8. ุงูุจุงูุงุช (Packages)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (public) | โ | โ | โ |

### 9. ุงูุงุดุชุฑุงูุงุช (Subscriptions)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (ูุคุณุณุชูู) | โ | โ | โ |

### 10. ุงูููุงุชูุฑ (Invoices)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (ูุคุณุณุชูู) | โ | โ | โ |

### 11. ุงููุฏููุนุงุช (Payments)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (ูุคุณุณุชูู) | โ | โ | โ |

### 12. ุงูุงุฌุชูุงุนุงุช (Meetings)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ูุญุงูู ุฑุฆูุณู | โ | โ | โ | โ |
| ุงุณุชุดุงุฑู ุชููู ุฑุฆูุณู | โ | โ | โ | โ |
| ูุฏูุฑ ูุดุฑูุน | โ | โ | โ | โ |
| ูุญุงูู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุงุณุชุดุงุฑู ุชููู | โ | โ | โ (ุงููุนูู ูู) | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| ุนููู | โ (ุงุฌุชูุงุนุงุชู) | โ | โ | โ |

### 13. ุชุฐุงูุฑ ุงูุฏุนู (Support Tickets)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (ุชุฐุงูุฑูู) | โ | โ | โ |

### 14. ุฑุฏูุฏ ุงูุฏุนู (Support Replies)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ | โ | โ |
| ุฏุนู ููู | โ | โ | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ (ุชุฐุงูุฑูู) | โ | โ | โ |

### 15. ุงูุนููุงุก ุงููุญุชูููู (Leads)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ (public) | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ | โ (public) | โ | โ |
| ุฏุนู ููู | โ | โ (public) | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ | โ (public) | โ | โ |

**ููุงุญุธุฉ:** `create` ููู Leads ูู public ูุฃูู ููุณุชุฎุฏู ูู ูููุฐุฌ ุงูุงุชุตุงู

### 16. ุณุฌูุงุช ุงูุชุฏููู (Audit Logs)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| ูุฏูุฑ ุงููุธุงู | โ | โ (auto) | โ | โ |
| ูุฏูุฑ ุงููุคุณุณุฉ | โ (ูุคุณุณุชู) | โ (auto) | โ | โ |
| **ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู** | โ | โ (auto) | โ | โ |

**ููุงุญุธุฉ:** `create` ุชููุงุฆู ุนุจุฑ Audit middleware

### 17. ุงูุฃุทุฑ ุงูุชูุธูููุฉ (Frameworks)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| **ุฌููุน ุงูุฃุฏูุงุฑ** | โ (public) | โ | โ | โ |
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |

**ููุงุญุธุฉ:** ุจูุงูุงุช ูุฑุฌุนูุฉ ุนุงูุฉ

### 18. ุงูุถูุงุจุท (Controls)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| **ุฌููุน ุงูุฃุฏูุงุฑ** | โ (public) | โ | โ | โ |
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |

**ููุงุญุธุฉ:** ุจูุงูุงุช ูุฑุฌุนูุฉ ุนุงูุฉ

### 19. ุงูููุงุฏ ุงููุงููููุฉ (Articles)

| ุงูุฏูุฑ | read | create | update | delete |
|------|------|--------|--------|--------|
| **ุฌููุน ุงูุฃุฏูุงุฑ** | โ (public) | โ | โ | โ |
| ูุฏูุฑ ุงููุธุงู | โ | โ | โ | โ |

**ููุงุญุธุฉ:** ุจูุงูุงุช ูุฑุฌุนูุฉ ุนุงูุฉ

---

## ๐ ููุงุนุฏ ุงูุตูุงุญูุงุช

### 1. Multi-tenancy

- ูู ููุฑุฏ (ูุง ุนุฏุง public) ูุญูู ุจู `organizationId`
- ุงููุณุชุฎุฏู ูุง ููููู ุงููุตูู ูุจูุงูุงุช ูุคุณุณุฉ ุฃุฎุฑู
- ุงูุงุณุชุซูุงุก: ูุฏูุฑ ุงููุธุงู ููููู ุงููุตูู ููู ุดูุก

### 2. Role Levels

- ุงูุฃุฏูุงุฑ ุฐุงุช Level ุฃุนูู ููุง ุตูุงุญูุงุช ุฃูุซุฑ
- Level 10 (ูุฏูุฑ ุงููุธุงู) = ุตูุงุญูุงุช ูุงููุฉ
- Level 2 (ุนููู) = ุตูุงุญูุงุช ูุญุฏูุฏุฉ

### 3. Resource Ownership

- ุจุนุถ ุงูููุงุฑุฏ ูุญููุฉ ุจู "ุงููุงูู"
- ูุซุงู: ุงููุณุชุฎุฏู ููููู ุชุนุฏูู ุจูุงูุงุชู ููุท
- ูุซุงู: ุงูุนููู ููููู ุฑุคูุฉ ูุดุงุฑูุนู ููุท

### 4. Public Resources

- ุงูุฃุทุฑ ุงูุชูุธูููุฉุ ุงูุถูุงุจุทุ ุงูููุงุฏ = public
- ุฃู ุดุฎุต ููููู ูุฑุงุกุชูุง
- ููุท ูุฏูุฑ ุงููุธุงู ููููู ุชุนุฏูููุง

---

## ๐ก๏ธ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

### ูู ุงูููุฏ

```typescript
// ูุซุงู: ุงูุชุญูู ูู ุตูุงุญูุฉ ุงููุฑุงุกุฉ
await requirePermission(ctx, 'project', 'read');

// ูุซุงู: ุงูุชุญูู ูู ุงููุคุณุณุฉ
await requireOrganization(ctx);

// ูุซุงู: ุงูุชุญูู ูู Role Level
await requireRoleLevel(ctx, 6); // ูุฏูุฑ ูุดุฑูุน ุฃู ุฃุนูู
```

### ูู tRPC

```typescript
// ุงุณุชุฎุฏุงู requirePermissionProcedure
projects: router({
  list: requirePermissionProcedure('project', 'read')
    .input(z.object({ organizationId: z.number() }))
    .query(async ({ input }) => {
      return await getProjectsByOrganization(input.organizationId);
    }),
}),
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุฌููุน APIs ูุญููุฉ** - ูุง ููุฌุฏ API ุจุฏูู ุชุญูู ูู ุงูุตูุงุญูุงุช (ูุง ุนุฏุง public)
2. **403 Forbidden** - ุนูุฏ ูุญุงููุฉ ุงููุตูู ุจุฏูู ุตูุงุญูุฉ
3. **401 Unauthorized** - ุนูุฏ ุนุฏู ุชุณุฌูู ุงูุฏุฎูู
4. **Audit Logging** - ุฌููุน ุงูุนูููุงุช ุงูุญุณุงุณุฉ ูุณุฌูุฉ

---

## ๐ ุงูุฏุนู

ููุงุณุชูุณุงุฑุงุช ุนู ุงูุตูุงุญูุงุช:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: security@regtech-platform.sa
- ุงูุชูุซูู: https://docs.regtech-platform.sa/permissions

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-02
